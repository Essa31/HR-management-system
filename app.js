'use strict';
let fullEmployee = [];
let form = document.getElementById("form");



function Employee(employeeID, fullName, Department, Level, imageURL) {
  this.employeeID = employeeID;
  this.fullName = fullName;
  this.Department = Department;
  this.Level = Level;
  this.imageURL = imageURL;
  fullEmployee.push(this);
}
function idNumber() {
  let val = Math.floor(1000 + Math.random() * 9000);
  return val;
}

let Ghazi = new Employee(
  idNumber(),
  "Ghazi Samer",
  "Administration",
  "Senior",
  "https://github.com/LTUC/prep-course-py-02/blob/main/Day08/Task/assets/Ghazi.jpg?raw=true"
);
let Lana = new Employee(
  idNumber(),
  "Lana Ali",
  "Finance",
  "Senior",
  "https://github.com/LTUC/prep-course-py-02/blob/main/Day08/Task/assets/Lana.jpg?raw=true"
);
let Tamara = new Employee(
  idNumber(),
  "Tamara Ayoub",
  "Marketing",
  "Senior",
  "https://github.com/LTUC/prep-course-py-02/blob/main/Day08/Task/assets/Tamara.jpg?raw=true"
);
let Safi = new Employee(
  idNumber(),
  "Safi Walid",
  "Administration",
  "Mid-Senior",
  "https://github.com/LTUC/prep-course-py-02/blob/main/Day08/Task/assets/Safi.jpg?raw=true"
);
let Omar = new Employee(
  idNumber(),
  "Omar Zaid",
  "Development",
  "Senior",
  "https://github.com/LTUC/prep-course-py-02/blob/main/Day08/Task/assets/Omar.jpg?raw=true"
);
let Rana = new Employee(
  idNumber(),
  "Rana Saleh",
  "Development",
  "Junior",
  "https://github.com/LTUC/prep-course-py-02/blob/main/Day08/Task/assets/Rana.jpg?raw=true"
);
let Hadi = new Employee(
  idNumber(),
  "Hadi Ahmad",
  "Finance",
  "Mid-Senior",
  "https://github.com/LTUC/prep-course-py-02/blob/main/Day08/Task/assets/Hadi.jpg?raw=true"
);

Employee.prototype.Salary = function () {
  let max = 0;
  let min = 0;
  if (this.Level == "Senior") {
    max = 2000;
    min = 1500;
  } else if (this.Level == "Mid-Senior") {
    min = 1000;
    max = 1500;
  } else if (this.Level == "Junior") {
    min = 500;
    max = 1000;
  }

  return Math.floor(Math.random() * (max - min)) + min;
};
/*fullEmployee.Salary()*/

Employee.prototype.netSalary = function () {
  let tax = this.Salary() * 0.075;
  let Ns = this.Salary() - tax;
  return Ns;
};

Employee.prototype.render = function () {
  for (let i = 0; i < fullEmployee.length; i++) {
    let item = fullEmployee[i];
    document.write(`<div class="employee">

    <img src=${item.imageURL}  width="50px">


        <p>Name: ${item.fullName} - ID: ${item.employeeID} </p>


        <p> Department:  ${item.Department} - Level ${item.Level} </p> 

        <p>  ${item.netSalary()} </p>
        </div>`);
  }
};


Ghazi.render();

/*console.log(form)*/

function handleSubmit(event) {
  event.preventDefault();
  let name = event.target.fullName.value;
  let Department = event.target.department.value;
  let level = event.target.level.value;
  let imageUrl = event.target.imageUrl.value;
  let newEmployee = new Employee(idNumber(), name, Department, level, imageUrl);
  newEmployee.render();
  
  saveData(fullEmployee);
}
// form.addEventListener('submit',handleSubmit);

/*const element = document.getElementById("myBtn");
element.addEventListener("click", myFunction);

function myFunction() {
  document.getElementById("demo").innerHTML = "Hello World";
}*/
function saveData(data) {
  let stringObj = JSON.stringify(data);
  localStorage.setItem("employee", stringObj);
}
saveData(fullEmployee);
function getData() {
  let retrievedData = localStorage.getItem("employee");
  console.log(retrievedData);
  let arrData = JSON.parse(retrievedData);
  console.log(arrData);
  fullEmployee = [];
  for (let i = 0; i < arrData.length; i++) {
    new Employee(
      idNumber(),
      arrData[i].name ,
      arrData[i].Department,
      arrData[i].Level,
      arrData[i].imageURL
    );
  }

  for (let i = 0; i < fullEmployee.length; i++) {
   
   
  }
}
getData();




// for (let i = 0; i < fullEmployee.length; i++) {
//     fullEmployee[i].renderTable();
// }
